<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title></head><STYLE TYPE="text/css"><!--.oval, .oval TD{background-image:url('inform:/doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = external.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href="inform://Extensions/Extensions.html" border=0><img border=0 src="inform:/doc_images/Hookindex.png" border=0></a></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#FFFFFF" size=2>Extensions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href="inform:/index.html" border=0><img border=0 src="inform:/doc_images/Hookup.png" border=0></a></td></tr></table><p><script language="JavaScript">
function pasteCode1033(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('Include Conversation Suggestions by Eric Eve.[=0x000A=][=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode1033()"><img border=0 src=inform:/doc_images/paste.png></a>&nbsp;<b>Conversation Suggestions<font color="#404040"> by </font>Eric Eve</b><p><small></small><p><p><hr><p><b><a STYLE="text-decoration: none" href=#docsec1><font color="#000000">Chapter 1: Introduction</font></a></b><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec2><font color="#000000">Section 1.1: Overview</font></a><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec3><font color="#000000">Section 1.2: Acknowledgements and Notes</font></a><br>
<br><b><a STYLE="text-decoration: none" href=#docsec4><font color="#000000">Chapter 2: Setting Up Suggestion Lists</font></a></b><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec5><font color="#000000">Section 2.1: Ask and Tell Suggestions</font></a><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec6><font color="#000000">Section 2.2: Other Suggestions</font></a><br>
<br><b><a STYLE="text-decoration: none" href=#docsec7><font color="#000000">Chapter 3: Managing Suggestions</font></a></b><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec8><font color="#000000">Section 3.1: Adding and Removing Suggestions</font></a><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec9><font color="#000000">Section 3.2: Suggestions and Player Knowledge</font></a><br>
&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href=#docsec10><font color="#000000">Section 3.3: Suggestions and Greetings</font></a><br>
<br><b>Examples</b><br>&nbsp;&nbsp;&nbsp;<a STYLE="text-decoration: none" href="Conversation Suggestions-eg1.html#eg1"><font color="#000000">A: The Lion in Winter</font></a><br><p><hr><p><p><hr><p>
<p>
<p><a name=docsec1><b><font color="#800000">Chapter 1: Introduction</b></font>
<p>
<p><a name=docsec2><b><font color="#000000">Section 1.1: Overview</b></font>
<p>
 In some games that involve a considerable amount of conversation, it can be helpful to tell the player what conversation options may be worth trying. This extension provides a TOPICS command that lists whatever topic suggestions we define. For example:
<p>
<blockquote><font color="#000080"> &gt;talk to bob<br> &quot;Hi there!&quot; you say.</font></blockquote>
<p>
<blockquote><font color="#000080"> &quot;Hello,&quot; he replies<br> (You could ask him about himself, Amanda, the gold ring or the lighthouse; or tell him about yourself or the strangers.)</font></blockquote>
<p>
<blockquote><font color="#000080"> &gt;topics<br> You could ask him about himself, Amanda, the gold ring or the lighthouse; or tell him about yourself or the strangers.</font></blockquote>
<p>
 It is not possible to have the game work out itself which topics are available for discussion; we have to manage topic suggestion lists in our own code, but this does give us control over precisely what suggestions we display to the player. There is no need to list every topic that may give a non-default response; it may often be better just to list the more relevant ones, or we may want to avoid spoilers.
<p>
 This extension uses Conversation Framework. It can also be used alongside Conversation Responses and Conversational Defaults. If you want to use Conversation Suggestions with Conversation Nodes you'll probably be better off using Conversation Package.
<p>
<p><a name=docsec3><b><font color="#000000">Section 1.2: Acknowledgements and Notes</b></font>
<p>
 Version 3 incorporates some code contributed by Matt Wigdahl, which takes effect if Complex Listing by Emily Short is present. The provides an alternative method of formatting lists of suggestions to use &quot;or&quot; rather than &quot;and&quot;. Without Complex Listing, Conversation Suggestions uses indexed text to do this, which obliterates any special formatting applied to suggestions in the list. For example, if you wanted individual topic suggestions to be shown in blue, you might add a rule like:
<p>
<blockquote><font color="#000080"> Rule for printing the name of something (called item) when listing suggested topics:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[blue letters][printed name of the item][default letters]&quot;;</font></blockquote>
<p>
 By default, however, this formatting will be lost, since Conversation Suggestions converts the output to indexed text before displaying it. To preserve such formatting we need to add the following to our code:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode1034(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('Include Complex Listing by Emily Short[=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode1034()"><img border=0 src=inform:/doc_images/paste.png></a> Include Complex Listing by Emily Short</font></blockquote>
<p>
 Conversation Suggestions will then use Complex Listing rather than indexed text to process the list of suggested topics, and our formatting will be preserved.
<p>
<p><hr><p><a name=docsec4><b><font color="#800000">Chapter 2: Setting Up Suggestion Lists</b></font>
<p>
<p><a name=docsec5><b><font color="#000000">Section 2.1: Ask and Tell Suggestions</b></font>
<p>
 Each actor in our game has three suggestion lists, defined in the following three properties:
<p>
<blockquote><font color="#000080"> ask-suggestions<br> tell-suggestions<br> other-suggestions</font></blockquote>
<p>
 This assumes that most of the time we'll want to suggest things the player can ask or tell people about, but it also allows us to make other kinds suggestions of suggestion as well.
<p>
 We can set up initial lists of things we can ask or tell an actor about simply by defining these lists on the NPC in question, for example:
<p>
<blockquote><font color="#000080"> Bob is a man.<br> The ask-suggestions are { bob, amanda, gold ring, lighthouse }.<br> The tell-suggestions are { yourself, the strangers }.</font></blockquote>
<p>
 Note that the objects we put in these lists are the simply the objects that the player can ask or tell Bob about. This means that if we want to suggest discussing an abstract topic (such as the weather) we need to define an object to represent that topic:
<p>
<blockquote><font color="#000080"> The weather is a familiar thing.</font></blockquote>
<p>
 We have to make such a topic familiar, otherwise the player won't be able to refer to it in a conversational command (and it won't be listed as a suggestion).
<p>
 If we want the suggested name of an object in a suggestion list to differ from its ordinary printed name, we can just write a rule for printing the name of the whatever when listing suggested topics, for example:
<p>
<blockquote><font color="#000080"> Rule for printing the name of the gold ring when listing suggested topics:<br> say &quot;the mysterious ring&quot;.</font></blockquote>
<p>
 Conversation Suggestions contains a special object for making suggestions about the current interlocutor. If we write the following:
<p>
<blockquote><font color="#000080"> Bob is a man.<br> The ask-suggestions are { self-suggestion, amanda, gold ring, lighthouse }.</font></blockquote>
<p>
 The suggestions will be shown as:
<p>
<blockquote><font color="#000080"> You could ask Bob about himself, Amanda, the gold ring or the lighthouse.</font></blockquote>
<p>
 Which reads more naturally than:
<p>
<blockquote><font color="#000080"> You could ask Bob about Bob, Amanda, the gold ring or the lighthouse.</font></blockquote>
<p>
 self-suggestion will automatically display as &quot;himself&quot; or &quot;herself&quot; depending on the gender of the current interlocutor.
<p>
 Conversation Framework already ensures that ASK BOB ABOUT HIMSELF is translated into ASK BOB ABOUT BOB.
<p>
<p><a name=docsec6><b><font color="#000000">Section 2.2: Other Suggestions</b></font>
<p>
 Although it's likely that most of the time we'll want to suggest things the player can ask or tell about, we may occasionally want to suggest other kinds of conversational response, for example &quot;You could say or no&quot; or &quot;You could give him the gold ring&quot; or &quot;You could say Jane&quot;. For this purpose we use the other-suggestions list, which should contain objects of kind misc-suggestion. The printed name of an misc-suggestion should have a printed name that displays a suggestion phrase that could follow &quot;You could&quot;, for example:
<p>
<blockquote><font color="#000080"> ring-suggestion is an misc-suggestion. The printed name is &quot;give him the gold ring&quot;<br> jane-suggestion is an misc-suggestion. The printed name is &quot;say Jane&quot;</font></blockquote>
<p>
 This extension predefines three misc-suggestions that are likely to be commonly used:
<p>
<blockquote><font color="#000080"> yes-suggestion<br> no-suggestion<br> yes-no-suggestion</font></blockquote>
<p>
 The last of these displays &quot;say yes or no&quot;, which might be slightly neater than the &quot;say yes or say no&quot; that would result from listing yes-suggestion and no-suggestion separately.
<p>
 Then to make these three suggestions available when addressing Bob we'd define:
<p>
<blockquote><font color="#000080"> Bob is a man.<br> The other-suggestions are { yes-no-suggestion, ring-suggestion, jane-suggestion }.</font></blockquote>
<p>
 If we had a number of other-suggestions, we might want some control over the order in which they're displayed. To be sure, they'll start out being displayed in the order in which we list them in the other-suggestions property, but once we start adding and subtracting misc-suggestions as the situation changes this will no longer be the case. The misc-suggestion kind therefore has a seqno property to allow us to control the order in which they're displayed: other-suggestions are sorted in seqno order before being displayed. This would allow us, for example, to group all suggestions of the form &quot;show him the whatever&quot; together by giving them the same seqno.
<p>
 By default misc-suggestions have a seqno of 100, but yes-suggestion, yes-no-suggestion and no-suggestion have seqnos of 10, 10 and 12 respectively, so that they'll normally be displayed at the start of the list.
<p>
<p><hr><p><a name=docsec7><b><font color="#800000">Chapter 3: Managing Suggestions</b></font>
<p>
<p><a name=docsec8><b><font color="#000000">Section 3.1: Adding and Removing Suggestions</b></font>
<p>
 We've just seen how to set up an initial list of conversation suggestions. That's all very well, but the chances are that the suggestions we want to offer will change over the course of the game. We'll want to remove some suggestions as they cease to be relevant (perhaps because the player has already asked the NPC about that topic) and add others as new things come to light.
<p>
 We'll often want to add or remove things as a result of things that are said, so this extension defines the following phrases to add or remove suggestions:
<p>
<blockquote><font color="#000080"> To say remove (obj - a thing) tell suggestion:<br> To say remove (obj - a thing) ask suggestion:<br> To say remove (obj - a thing) other suggestion:<br> To say add (obj - a thing) tell suggestion:<br> To say add (obj - a thing) ask suggestion:<br> To say add (obj - a thing) other suggestion:</font></blockquote>
<p>
 These can then be used like this:
<p>
<blockquote><font color="#000080"> &quot;[remove gold key tell suggestion]&quot;<br> &quot;[remove bob ask suggestion]&quot;<br> &quot;[remove yes-no other suggestion]&quot;<br> &quot;[add matilda tell suggestion]&quot;<br> &quot;[add treasure ask suggestion]&quot;<br> &quot;[add ring-suggestion other suggestion]&quot;</font></blockquote>
<p>
 Usually, though these would be embedded in longer pieces of text giving the NPC's response to some conversational command, e.g.:
<p>
<blockquote><font color="#000080"> After quizzing Bob about Bob:<br> say &quot;'How are you today, Bob?' you ask.<br>	'Oh fine, just fine,' he replies, [remove bob ask suggestion]'Absolutely broke, but fine.'&quot;</font></blockquote>
<p>
<p><a name=docsec9><b><font color="#000000">Section 3.2: Suggestions and Player Knowledge</b></font>
<p>
 In one particular case the Conversation Suggestions extension can automatically take care of when suggestions occur. The Epistemology extension (included via Conversation Framework) keeps track of what the player knows about. Something is known either if the player has seen it, or if it is defined as familiar. Anything else is unknown. Conversation Suggestions automatically removes anything unknown from the list of suggestions it displays.
<p>
 This means that you can include unknown things in the initial ask-suggestions and tell-suggestions lists, and they won't actually be displayed until they become known. Making them known (e.g. through using &quot;now the magic ring is familiar&quot; or &quot;[make the magic ring known]&quot;) will then simultaneously make them available to be asked and told about (or rather quizzed and informed about) and make them appear in the list of suggested topics.
<p>
<p><a name=docsec10><b><font color="#000000">Section 3.3: Suggestions and Greetings</b></font>
<p>
 By default a list of conversation suggestions is displayed either when the player enters a TOPICS command, or when the player issues an explicit greeting command (such as TALK TO BOB or BOB, HELLO). The latter behaviour can be disabled by changing suggest-on-greeting to false.
<p>
<hr><p><a name=eg1><table border="0" cellspacing="0" cellpadding="0"><tr><td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px><table border="0" cellspacing="0" cellpadding="0"><tr class="oval"><td width=38px height=30px align="left" valign="center"><a href="Conversation Suggestions-eg1.html#eg1" STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>A</b></div></a></td></tr></table></td><td cellpadding=0 cellspacing=0 halign="left" valign="top"><font size=2><a href="Conversation Suggestions-eg1.html#eg1" STYLE="text-decoration: none"><img border="0" src='inform:/doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000">The Lion in Winter</font></b></a><br>Suggestions for a conversation fit for a king.<p></td></tr></table><p>
<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>

<p>
<p></body></html>